select(sector, year, PT, PTrel_nominal, PT_tcp, PTrel_tcp)
data_prod_relativa_arg %>%
select(-c(PT, PT_tcp))
data_prod_relativa_arg %>%
select(-c(PT, PT_tcp)) %>%
melt()
library(tidyverse)
library(ggplot2)
library(wesanderson)
library(RColorBrewer )
# setwd("C:/Archivos/datos/bea/codigos/majority_owned/")
# setwd("C:/Documents/data/bea/codigos/majority_owned/")
results_path = './results/bea/majority_owned_nonbank/'
#params
title_size=40
text_size= 30
axis_size= 5
strip_size= 6
data <- read.csv("./results/bea/majority_owned_nonbank/data_majority_owned_nonbank.csv") %>%
filter(sector != "Other Industries") %>%
mutate(sector = case_when(sector == "Electrical equipment, appliances, and components" ~
"Electrical equipment",
sector == "Finance (except depository institutions) and insurance" ~
"Finance and insurance", # "Finance without depository",
sector == "Professional, scientific, and technical services" ~
"Professional services",
T ~ sector ))
tcp_df <- read.csv('./results/indice_tcp.csv')
# Create a vector of unique sectors
sectors <- unique(data$sector)
#salario
data %>%
filter( country %in% c("South America", "European Union", "All Countries Total",
"Asia and Pacific", "Central America", "Mexico") ) %>%
filter( sector %in% c("All Industries Total","Mining",
"Transportation Equipment", "Total Manufacturing"  ) ) %>%
group_by(country, sector) %>%
summarise(Rem = mean(Rem*10e6, na.rm=T) ) %>%
reshape2::melt() %>%
ggplot(aes(x=reorder(variable,-value),y= value, fill = country)) +
# geom_col(position = "dodge")+
geom_bar(position = "dodge", stat="identity")+
facet_wrap(~sector, scales = "free", ncol=2)+
theme_minimal()+
labs(title= "Salario promedio en las inversiones de EEUU",
subtitle = "Promedio 1999-2019", y="USD")+
theme(plot.title = element_text(size=title_size),
plot.subtitle  = element_text(size=title_size*.8),
legend.position = "bottom",
legend.title = element_blank(),
legend.text = element_text(size=text_size),
axis.title.x = element_blank(),
axis.title.y = element_text(size= text_size),
axis.text.y = element_text(size= text_size),
axis.text.x = element_blank(),
strip.text = element_text(size=text_size))+
scale_fill_brewer(palette="Paired")
## Salario relativo
data %>%
filter( country %in% c("Argentina") ) %>%
filter( sector %in% c("All Industries Total","Mining",
"Transportation Equipment", "Total Manufacturing"  ) ) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" ))
## Salario relativo
data %>%
filter( country %in% c("Argentina") ) %>%
filter( sector %in% c("All Industries Total","Mining",
"Transportation Equipment", "Total Manufacturing"  ) ) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" )) %>%
select(c('sector', 'country', 'year', 'Rem', 'RemEU'))
## Salario relativo
salario_relativo_arg <- data %>%
filter( country %in% c("Argentina") ) %>%
# filter( sector %in% c("All Industries Total","Mining",
#                       "Transportation Equipment", "Total Manufacturing"  ) ) %>%
select(c('sector', 'country', 'year', 'Rem')) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" )) %>%
left_join(tcp_df %>%
select('year', "TCC", "TCP_1"),
by = 'year') %>%
mutate(Rem_relativa_eu = Rem / RemEU,
Rem_tcp = Rem * TCC / TCP_1,
Rem_relativa_eu = Rem_tcp / RemEU)
glimpse(salario_relativo_arg)
salario_relativo_arg %>%
reshape2::melt()
salario_relativo_arg %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value")
## Salario relativo
salario_relativo_arg <- data %>%
filter( country %in% c("Argentina") ) %>%
# filter( sector %in% c("All Industries Total","Mining",
#                       "Transportation Equipment", "Total Manufacturing"  ) ) %>%
select(c('sector', 'country', 'year', 'Rem')) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" )) %>%
left_join(tcp_df %>%
select('year', "TCC", "TCP_1"),
by = 'year') %>%
mutate(Rem_relativa_eu = Rem / RemEU,
Rem_tcp = Rem * TCC / TCP_1,
Rem_relativa_eu_tcp = Rem_tcp / RemEU)
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp' ))
## Salario relativo
salario_relativo_arg <- data %>%
filter( country %in% c("Argentina") ) %>%
# filter( sector %in% c("All Industries Total","Mining",
#                       "Transportation Equipment", "Total Manufacturing"  ) ) %>%
select(c('sector', 'country', 'year', 'Rem')) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" )) %>%
left_join(tcp_df %>%
select('year', "TCC", "TCP_1"),
by = 'year') %>%
mutate(Rem_relativa_eu = Rem / RemEU,
Rem_tcp_arg = Rem * TCC / TCP_1,
Rem_relativa_eu_tcp = Rem_tcp_arg / RemEU)
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value")
custom_palette <- colorRampPalette(brewer.pal(10, "Set1"))(15)
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp " = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp " = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
custom_palette_2 <- colorRampPalette(brewer.pal(10, "Set1"))(16)
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp " = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp " = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
ggsave("./results/bea/majority_owned_nonbank/wage_arg_relativa_eu.png", width = 10, height = 6) # Adjust width and height
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
filter(sector %in% c("All Industries Total",  "Chemicals",
"Machinery" , "Food" ,
"Primary and fabricated metals",
"Computers and electronic products",
"Mining", "Total Manufacturing") ) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp " = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
filter(sector %in% c("All Industries Total",  "Chemicals",
"Machinery" , "Food" ,
"Primary and fabricated metals",
"Computers and electronic products",
"Mining", "Total Manufacturing") ) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value")
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
filter(sector %in% c("All Industries Total",  "Chemicals",
"Machinery" , "Food" ,
"Primary and fabricated metals",
"Computers and electronic products",
"Mining", "Total Manufacturing") ) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp" = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
## Salario relativo
salario_relativo_arg <- data %>%
filter( country %in% c("Argentina") ) %>%
# filter( sector %in% c("All Industries Total","Mining",
#                       "Transportation Equipment", "Total Manufacturing"  ) ) %>%
select(c('sector', 'country', 'year', 'Rem')) %>%
left_join(data %>%
filter(country %in% c("Europe")) %>%
select(year, sector, RemEU=Rem) ,
by = c("year", "sector" )) %>%
left_join(tcp_df %>%
select('year', "TCC", "TCP_1"),
by = 'year') %>%
mutate(Rem_relativa_eu = Rem / RemEU - 1,
Rem_tcp_arg = Rem * TCC / TCP_1,
Rem_relativa_eu_tcp = Rem_tcp_arg / RemEU - 1)
custom_palette_2 <- colorRampPalette(brewer.pal(10, "Set1"))(16)
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
filter(sector %in% c("All Industries Total",  "Chemicals",
"Machinery" , "Food" ,
"Primary and fabricated metals",
"Computers and electronic products",
"Mining", "Total Manufacturing") ) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp" = "Brecha Salarial TCP vs Europa")),
ncol =2) +
scale_y_continuous(labels = scales::percent) +
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
ggsave("./results/bea/majority_owned_nonbank/wage_arg_relativa_eu_2.png", width = 10, height = 6) # Adjust width and height
salario_relativo_arg %>%
select(-c('Rem', 'Rem_tcp_arg', 'RemEU' )) %>%
filter(sector %in% c("All Industries Total",  "Chemicals",
"Machinery" , "Food" ,
"Primary and fabricated metals",
"Computers and electronic products",
"Mining", "Total Manufacturing") ) %>%
pivot_longer(cols = starts_with("Rem"), names_to = "variable", values_to = "value") %>%
# reshape2::melt() %>%
ggplot(aes(x=year,y= value, color = sector)) +
geom_line(size = 0.3) +
facet_wrap(~variable, labeller = labeller(variable =
c("Rem_relativa_eu" = "Brecha Salarial nominal vs Europa",
"Rem_relativa_eu_tcp" = "Brecha Salarial TCP vs Europa")),
ncol =2) +
# scale_y_continuous(labels = scales::percent) +
scale_y_continuous(labels = scales::percent,
breaks = scales::pretty_breaks(n = 10)) + # Add more ticks using 'breaks'
# theme_minimal() +
# theme_bw()+
theme_light()+
theme(
legend.position = "bottom",
legend.title = element_blank(),
axis.text.x = element_text(angle = 45, size= 10),
axis.text.y = element_text(size= 12),
axis.title  = element_blank(),
strip.text = element_text(size=8),
legend.text = element_text(size = 8) # Adjust legend text size
) +
scale_color_manual(values = custom_palette_2)+
# scale_color_brewer(palette="Paired") +
# viridis::scale_color_viridis(discrete = TRUE, option = "viridis") +
labs(
title = "Brecha Salarial de Inversiones de EEUU",
subtitle = "Argentina Relativa a Total Europa (sectores seleccionados)",
caption = "Fuente: elaboración propia en base a BEA"
) +
coord_cartesian(expand = FALSE) # Prevent extra space around the plot
ggsave("./results/bea/majority_owned_nonbank/wage_arg_relativa_eu_2.png", width = 10, height = 6) # Adjust width and height
library(tidyverse)
library(ggplot2)
library(wesanderson)
library(RColorBrewer )
# setwd("C:/Archivos/datos/bea/codigos/majority_owned/")
# setwd("C:/Documents/data/bea/codigos/majority_owned/")
results_path = './results/bea/majority_owned_nonbank/'
#params
title_size=40
text_size= 30
axis_size= 5
strip_size= 6
data <- read.csv("./results/bea/majority_owned_nonbank/data_majority_owned_nonbank.csv") %>%
filter(sector != "Other Industries") %>%
mutate(sector = case_when(sector == "Electrical equipment, appliances, and components" ~
"Electrical equipment",
sector == "Finance (except depository institutions) and insurance" ~
"Finance and insurance", # "Finance without depository",
sector == "Professional, scientific, and technical services" ~
"Professional services",
T ~ sector ))
tcp_df <- read.csv('./results/indice_tcp.csv')
tcp_df
# TCP Plot
tcp_df %>%
glimpse()
# TCP Plot
tcp_df %>%
# glimpse()
ggplot(aes(year, TCP_1))+
geom_line()
# TCP Plot
tcp_df %>%
# glimpse()
ggplot(aes(year, index_TCP_1 ))+
geom_line()
# TCP Plot
tcp_df %>%
# glimpse()
ggplot(aes(year, index_TCP_1 ))+
geom_line()
library(tidyverse)
library(ggplot2)
library(wesanderson)
library(RColorBrewer )
# setwd("C:/Archivos/datos/bea/codigos/majority_owned/")
# setwd("C:/Documents/data/bea/codigos/majority_owned/")
results_path = './results/bea/majority_owned_nonbank/'
#params
title_size=40
text_size= 30
axis_size= 5
strip_size= 6
data <- read.csv("./results/bea/majority_owned_nonbank/data_majority_owned_nonbank.csv") %>%
filter(sector != "Other Industries") %>%
mutate(sector = case_when(sector == "Electrical equipment, appliances, and components" ~
"Electrical equipment",
sector == "Finance (except depository institutions) and insurance" ~
"Finance and insurance", # "Finance without depository",
sector == "Professional, scientific, and technical services" ~
"Professional services",
T ~ sector ))
write.csv(data,
'./results/bea/majority_owned_nonbank/data_majority_owned_nonbank_procesado.csv',
row.names = F)
tcp_df <- read.csv('./results/indice_tcp.csv')
# TCP Plot
tcp_df %>%
# glimpse()
ggplot(aes(year, index_TCP_1 ))+
geom_line()
# Create a vector of unique sectors
sectors <- unique(data$sector)
